<!DOCTYPE html>                                                  
  <html lang="en">                                                 
  <head>                                                           
      <meta charset="UTF-8">                                       
      <meta name="viewport" content="width=device-width,           
  initial-scale=1.0">                                              
      <title>Leila Admin Dashboard</title>                         
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/    
  dist/css/bootstrap.min.css" rel="stylesheet">                    
      <link href="https://cdnjs.cloudflare.com/ajax/libs/font-a    
  wesome/6.0.0/css/all.min.css" rel="stylesheet">                  
      <style>                                                      
          .sidebar { height: 100vh; background: #343a40;           
  position: fixed; width: 250px; }                                 
          .main-content { margin-left: 250px; padding: 20px; }     
          .product-card { transition: transform 0.2s; }            
          .product-card:hover { transform: translateY(-5px); }     
          .product-image { height: 150px; object-fit: cover; }     
      </style>                                                     
  </head>                                                          
  <body>                                                           
      <div class="d-flex">                                         
          <div class="sidebar text-white p-3">                     
              <h4 class="mb-4"><i class="fas fa-tshirt             
  me-2"></i>LMC Admin</h4>                                         
              <nav class="nav flex-column">                        
                  <a class="nav-link text-white active"            
  href="#" onclick="showProducts()"><i class="fas fa-box           
  me-2"></i>Products</a>                                           
                  <a class="nav-link text-white" href="#"          
  onclick="showAddProduct()"><i class="fas fa-plus                 
  me-2"></i>Add Product</a>                                        
                  <a class="nav-link text-white" href="/"><i       
  class="fas fa-home me-2"></i>View Site</a>                       
              </nav>                                               
          </div>                                                   
                                                                   
          <div class="main-content flex-grow-1">                   
              <div class="d-flex justify-content-between           
  align-items-center mb-4">                                        
                  <h1>Product Management</h1>                      
                  <button class="btn btn-primary"                  
  onclick="showAddProduct()"><i class="fas fa-plus                 
  me-2"></i>Add New Product</button>                               
              </div>                                               
                                                                   
              <div id="products-view">                             
                  <div class="row mb-3">                           
                      <div class="col-md-6">                       
                          <select class="form-select"              
  id="category-filter" onchange="filterProducts()">                
                              <option value="">All                 
  Categories</option>                                              
                              <option value="men">Men</option>     
                              <option                              
  value="women">Women</option>                                     
                          </select>                                
                      </div>                                       
                      <div class="col-md-6">                       
                          <div class="input-group">                
                              <input type="text"                   
  class="form-control" id="search-input" placeholder="Search       
  products..." onkeyup="searchProducts()">                         
                              <span class="input-group-text"><i    
   class="fas fa-search"></i></span>                               
                          </div>                                   
                      </div>                                       
                  </div>                                           
                  <div class="row"                                 
  id="products-container"></div>                                   
              </div>                                               
                                                                   
              <div id="product-form" class="d-none">               
                  <div class="card">                               
                      <div class="card-header"><h3                 
  id="form-title">Add New Product</h3></div>                       
                      <div class="card-body">                      
                          <form id="productForm"                   
  onsubmit="handleProductSubmit(event)">                           
                              <input type="hidden"                 
  id="product-id">                                                 
                              <div class="row">                    
                                  <div class="col-md-6 mb-3">      
                                      <label for="product-name"    
   class="form-label">Product Name</label>                         
                                      <input type="text"           
  class="form-control" id="product-name" required>                 
                                  </div>                           
                                  <div class="col-md-6 mb-3">      
                                      <label                       
  for="product-price" class="form-label">Price ($)</label>         
                                      <input type="number"         
  class="form-control" id="product-price" step="0.01" required>    
                                  </div>                           
                              </div>                               
                              <div class="row">                    
                                  <div class="col-md-6 mb-3">      
                                      <label                       
  for="product-category" class="form-label">Category</label>       
                                      <select                      
  class="form-select" id="product-category" required>              
                                          <option                  
  value="">Select Category</option>                                
                                          <option                  
  value="men">Men</option>                                         
                                          <option                  
  value="women">Women</option>                                     
                                      </select>                    
                                  </div>                           
                                  <div class="col-md-6 mb-3">      
                                      <label                       
  for="product-image" class="form-label">Image URL</label>         
                                      <input type="url"            
  class="form-control" id="product-image" required>                
                                  </div>                           
                              </div>                               
                              <div class="mb-3">                   
                                  <label                           
  for="product-description"                                        
  class="form-label">Description</label>                           
                                  <textarea                        
  class="form-control" id="product-description" rows="3"           
  required></textarea>                                             
                              </div>                               
                              <div class="row">                    
                                  <div class="col-md-6 mb-3">      
                                      <label                       
  for="product-sizes" class="form-label">Sizes                     
  (comma-separated)</label>                                        
                                      <input type="text"           
  class="form-control" id="product-sizes" placeholder="S, M, L,    
   XL">                                                            
                                  </div>                           
                                  <div class="col-md-6 mb-3">      
                                      <div class="form-check       
  mt-4">                                                           
                                          <input                   
  class="form-check-input" type="checkbox"                         
  id="product-featured">                                           
                                          <label                   
  class="form-check-label" for="product-featured">Featured         
  Product</label>                                                  
                                      </div>                       
                                      <div class="form-check">     
                                          <input                   
  class="form-check-input" type="checkbox" id="product-instock"    
   checked>                                                        
                                          <label                   
  class="form-check-label" for="product-instock">In                
  Stock</label>                                                    
                                      </div>                       
                                  </div>                           
                              </div>                               
                              <div class="d-flex gap-2">           
                                  <button type="submit"            
  class="btn btn-success"><i class="fas fa-save me-2"></i>Save     
  Product</button>                                                 
                                  <button type="button"            
  class="btn btn-secondary" onclick="showProducts()"><i            
  class="fas fa-times me-2"></i>Cancel</button>                    
                              </div>                               
                          </form>                                  
                      </div>                                       
                  </div>                                           
              </div>                                               
          </div>                                                   
      </div>                                                       
                                                                   
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0    
  /dist/js/bootstrap.bundle.min.js"></script>                      
      <script>                                                     
          let allProducts = [];                                    
          let isEditing = false;                                   
                                                                   
          document.addEventListener('DOMContentLoaded',            
  loadProducts);                                                   
                                                                   
          async function loadProducts() {                          
              try {                                                
                  const response = await                           
  fetch('/api/products');                                          
                  allProducts = await response.json();             
                  displayProducts(allProducts);                    
              } catch (error) {                                    
                  console.error('Error loading products:',         
  error);                                                          
                  alert('Error loading products');                 
              }                                                    
          }                                                        
                                                                   
          function displayProducts(products) {                     
              const container =                                    
  document.getElementById('products-container');                   
                                                                   
              if (products.length === 0) {                         
                  container.innerHTML = '<div class="col-12        
  text-center"><p class="text-muted">No products                   
  found</p></div>';                                                
                  return;                                          
              }                                                    
                                                                   
              container.innerHTML = products.map(product => `      
                  <div class="col-md-4 col-lg-3 mb-4">             
                      <div class="card product-card h-100">        
                          <img src="${product.image}"              
  class="card-img-top product-image" alt="${product.name}"         
  onerror="this.src='https://via.placeholder.com/300x200?text=N    
  o+Image'">                                                       
                          <div class="card-body d-flex             
  flex-column">                                                    
                              <h6                                  
  class="card-title">${product.name}</h6>                          
                              <p class="card-text text-muted       
  small flex-grow-1">${product.description.substring(0,            
  50)}...</p>                                                      
                              <div class="mt-auto">                
                                  <div class="d-flex               
  justify-content-between align-items-center mb-2">                
                                      <span class="fw-bold         
  text-success">$${product.price}</span>                           
                                      <span class="badge           
  ${product.category === 'men' ? 'bg-primary' :                    
  'bg-pink'}">${product.category}</span>                           
                                  </div>                           
                                  <div class="d-flex               
  justify-content-between align-items-center">                     
                                      <div>                        
                                          ${product.featured ?     
  '<i class="fas fa-star text-warning" title="Featured"></i>' :    
   ''}                                                             
                                          ${product.inStock ?      
  '<i class="fas fa-check text-success" title="In Stock"></i>'     
  : '<i class="fas fa-times text-danger" title="Out of             
  Stock"></i>'}                                                    
                                      </div>                       
                                      <div class="btn-group        
  btn-group-sm">                                                   
                                          <button class="btn       
  btn-outline-primary" onclick="editProduct('${product._id}')"     
  title="Edit"><i class="fas fa-edit"></i></button>                
                                          <button class="btn       
  btn-outline-danger" onclick="deleteProduct('${product._id}')"    
   title="Delete"><i class="fas fa-trash"></i></button>            
                                      </div>                       
                                  </div>                           
                              </div>                               
                          </div>                                   
                      </div>                                       
                  </div>                                           
              `).join('');                                         
          }                                                        
                                                                   
          function showProducts() {                                
              document.getElementById('products-view').classLis    
  t.remove('d-none');                                              
              document.getElementById('product-form').classList    
  .add('d-none');                                                  
              loadProducts();                                      
          }                                                        
                                                                   
          function showAddProduct() {                              
              isEditing = false;                                   
              document.getElementById('form-title').textContent    
   = 'Add New Product';                                            
              document.getElementById('products-view').classLis    
  t.add('d-none');                                                 
              document.getElementById('product-form').classList    
  .remove('d-none');                                               
              document.getElementById('productForm').reset();      
              document.getElementById('product-id').value = '';    
          }                                                        
                                                                   
          function filterProducts() {                              
              const category =                                     
  document.getElementById('category-filter').value;                
              const filtered = category ? allProducts.filter(p     
  => p.category === category) : allProducts;                       
              displayProducts(filtered);                           
          }                                                        
                                                                   
          function searchProducts() {                              
              const search =                                       
  document.getElementById('search-input').value.toLowerCase();     
              const filtered = allProducts.filter(p =>             
                  p.name.toLowerCase().includes(search) ||         
                  p.description.toLowerCase().includes(search)     
              );                                                   
              displayProducts(filtered);                           
          }                                                        
                                                                   
          async function handleProductSubmit(event) {              
              event.preventDefault();                              
                                                                   
              const productData = {                                
                  name:                                            
  document.getElementById('product-name').value,                   
                  description:                                     
  document.getElementById('product-description').value,            
                  price:                                           
  parseFloat(document.getElementById('product-price').value),      
                  category:                                        
  document.getElementById('product-category').value,               
                  image:                                           
  document.getElementById('product-image').value,                  
                  sizes: document.getElementById('product-sizes    
  ').value.split(',').map(s => s.trim()).filter(s => s),           
                  featured:                                        
  document.getElementById('product-featured').checked,             
                  inStock:                                         
  document.getElementById('product-instock').checked               
              };                                                   
                                                                   
              try {                                                
                  const productId =                                
  document.getElementById('product-id').value;                     
                  const url = isEditing ?                          
  `/api/products/${productId}` : '/api/products';                  
                  const method = isEditing ? 'PUT' : 'POST';       
                                                                   
                  const response = await fetch(url, {              
                      method: method,                              
                      headers: { 'Content-Type':                   
  'application/json' },                                            
                      body: JSON.stringify(productData)            
                  });                                              
                                                                   
                  if (response.ok) {                               
                      alert(isEditing ? 'Product updated           
  successfully!' : 'Product added successfully!');                 
                      showProducts();                              
                  } else {                                         
                      const error = await response.json();         
                      alert('Error: ' + error.error);              
                  }                                                
              } catch (error) {                                    
                  console.error('Error:', error);                  
                  alert('Error saving product');                   
              }                                                    
          }                                                        
                                                                   
          async function editProduct(id) {                         
              try {                                                
                  const response = await                           
  fetch(`/api/products/${id}`);                                    
                  const product = await response.json();           
                                                                   
                  isEditing = true;                                
                                                                   
  document.getElementById('form-title').textContent = 'Edit        
  Product';                                                        
                  document.getElementById('product-id').value =    
   product._id;                                                    
                  document.getElementById('product-name').value    
   = product.name;                                                 
                                                                   
  document.getElementById('product-description').value =           
  product.description;                                             
                                                                   
  document.getElementById('product-price').value =                 
  product.price;                                                   
                                                                   
  document.getElementById('product-category').value =              
  product.category;                                                
                                                                   
  document.getElementById('product-image').value =                 
  product.image;                                                   
                                                                   
  document.getElementById('product-sizes').value =                 
  product.sizes.join(', ');                                        
                                                                   
  document.getElementById('product-featured').checked =            
  product.featured;                                                
                                                                   
  document.getElementById('product-instock').checked =             
  product.inStock;                                                 
                                                                   
                  document.getElementById('products-view').clas    
  sList.add('d-none');                                             
                  document.getElementById('product-form').class    
  List.remove('d-none');                                           
              } catch (error) {                                    
                  console.error('Error loading product:',          
  error);                                                          
                  alert('Error loading product for editing');      
              }                                                    
          }                                                        
                                                                   
          async function deleteProduct(id) {                       
              if (!confirm('Are you sure you want to delete        
  this product?')) return;                                         
                                                                   
              try {                                                
                  const response = await                           
  fetch(`/api/products/${id}`, { method: 'DELETE' });              
                  if (response.ok) {                               
                      alert('Product deleted successfully!');      
                      loadProducts();                              
                  } else {                                         
                      alert('Error deleting product');             
                  }                                                
              } catch (error) {                                    
                  console.error('Error:', error);                  
                  alert('Error deleting product');                 
              }                                                    
          }                                                        
      </script>                                                    
  </body>                                                          
  </html>  
